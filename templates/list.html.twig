{% extends 'base.html.twig' %}

{% block title %}My Tasks{% endblock %}

{% block body %}
<div class="container mt-5">
    <h2 class="text-center">My Tasks</h2>

    <table class="table table-striped shadow-sm">
        <thead class="table-dark">
            <tr>
                <th>Name</th>
                <th>Description</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {% for task in tasks %}
                <tr>
                    <td>{{ task.name }}</td>
                    <td>{{ task.description }}</td>
                    <td><span class="badge bg-primary">{{ task.status }}</span></td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Floating Plus Button -->
    <button id="openTaskModal" class="btn btn-primary add-task-btn">+</button>
</div>

<!-- Modal (Popup) Form -->
<div id="taskModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>
        <h2>Create Task</h2>
        <form id="taskForm">
            <div class="mb-3">
                <label for="taskName" class="form-label">Task Name</label>
                <input type="text" id="taskName" name="taskName" class="form-control" required>
            </div>

            <div class="mb-3">
                <label for="taskDescription" class="form-label">Description</label>
                <textarea id="taskDescription" name="taskDescription" class="form-control" required></textarea>
            </div>

            <div class="mb-3">
                <label for="taskStatus" class="form-label">Status</label>
                <select id="taskStatus" name="taskStatus" class="form-control">
                    <option value="Pending">Pending</option>
                    <option value="In Progress">In Progress</option>
                    <option value="Completed">Completed</option>
                </select>
            </div>

            <button type="submit" class="btn btn-success">Create Task</button>
        </form>
    </div>
</div>
{% endblock %}

{% block javascripts %}
    {{ importmap('js/task.js') }}
{% endblock %}